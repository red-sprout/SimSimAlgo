# [Platinum IV] 곰곰이의 벼락치기 - 26079 

[문제 링크](https://www.acmicpc.net/problem/26079) 

### 성능 요약

메모리: 116224 KB, 시간: 1372 ms

### 분류

수학, 다이나믹 프로그래밍, 트리, 정수론, 조합론, 트리에서의 다이나믹 프로그래밍, 모듈로 곱셈 역원, 페르마의 소정리

### 제출 일자

2025년 11월 13일 22:24:58

### 문제 설명

<p style="text-align: center;"><img alt="곰곰: 파스스" src="https://upload.acmicpc.net/6bcb40c8-2b48-4182-8a4d-c92a3e1c935c/-/preview/" style="max-height: 120px; object-fit:contain; display:inline-block;"></p>

<p>기말고사가 다가오는 곰곰이는 밀린 강의 $N$개를 봐야 한다. 강의는 $1$번부터 $N$번까지 차례대로 번호가 붙어 있으며, 모든 강의에 대해서 해당 강의를 보기 전에 먼저 봐야 하는 강의가 <strong>최대 하나</strong> 존재한다. 곰곰이는 이러한 강의 간의 관계를 $a \rightarrow b$로 나타냈으며, 이는 강의 $b$를 보려면 강의 $a$를 먼저 봐야 한다는 의미이다. 이러한 강의 간의 관계가 사이클을 이루는 경우는 존재하지 않는다. 강의 간의 관계에 따라서 모든 강의를 보는 순서는 다양할 수 있다. 모든 강의를 보는 순서의 가짓수가 몇 가지인지 구해주자. 답이 커질 수 있으니 $10^9+7$로 나눈 나머지를 출력한다.</p>

### 입력 

 <p>첫째 줄에 강의 수 $N$과 강의 간의 관계 수 $M$이 주어진다. $(0 \leq M \lt N \leq 200\,000)$</p>

<p>둘째 줄부터 $M$개의 줄에 걸쳐 강의 간의 관계를 의미하는 정수 $a$와 $b$가 공백으로 구분되어 주어진다. $(1 \leq a, b \leq N; a \neq b)$</p>

<p>강의 $b$를 보려면 강의 $a$를 먼저 봐야 한다는 의미이다. 강의 간의 관계가 사이클을 이루는 경우는 없으며, 모든 강의에 대해서 해당 강의를 보기 전에 먼저 봐야 하는 강의가 <strong>최대 하나</strong> 존재한다.</p>

### 출력 

 <p>모든 강의를 보는 순서의 가짓수를 $10^9+7$로 나눈 나머지를 출력한다.</p>

